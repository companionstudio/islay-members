- breadcrumb('Club')

= record_name('Club Overview', 'dashboard')

= content(:class => 'inset') do
  = column(8) do

    .dashboard-overview
      .dashboard-overview-count
        %span.value= Member.active.count
        %span.key Active #{'Members'.pluralize(Subscription.active.count)}

      .dashboard-overview-count
        %span.value= Subscription.active.count
        %span.key Active #{'Subscription'.pluralize(Subscription.active.count)}

      - if Member.latest
        .dashboard-overview-excerpt
          %span.label Newest Member
          %span.value= link_to(Member.latest.name, path(:edit, Member.latest))

      - if Subscription.latest
        .dashboard-overview-excerpt
          %span.label Newest Subscriber
          %span.value= link_to(Subscription.latest.subscriber.name, path(:edit, Subscription.latest.subscriber))

    #activity-cell.report-cell
      %h3 Activity Log

      %table#activity-logs
        %thead
          %tr
            %th{colspan: 2} Event
            %th Item
            %th At

        %tbody
          - Member.activity.each do |log|
            %tr(class="#{log.type}-log")
              %td
                - if log.user_name.blank?
                  Self
                - else
                  #{log.user_name.humanize}
              %td= log.event.humanize
              %td= link_to("<strong>#{log.friendly_type}:</strong> #{log.name}".html_safe, log.url)
              %td.meta
                %span.time= log.created_at
